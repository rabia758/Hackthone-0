{% extends "base.html" %}

{% block title %}Pending Approval - AI Employee{% endblock %}

{% block content %}
<h1>Pending Approval</h1>

<div class="card">
    <p>Total items pending approval: <strong>{{ files|length }}</strong></p>
</div>

{% if files %}
<table>
    <thead>
        <tr>
            <th>Filename</th>
            <th>Type</th>
            <th>Last Modified</th>
            <th>Size</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for file in files %}
        <tr>
            <td>
                <a href="{{ url_for('view_file', filepath=file.filepath) }}" class="btn btn-primary">
                    {{ file.filename }}
                </a>
            </td>
            <td>
                <span class="file-type type-{{ file.type }}">{{ file.type }}</span>
            </td>
            <td>{{ file.modified }}</td>
            <td>{{ file.size }} bytes</td>
            <td>
                <form method="POST" action="{{ url_for('approve_file') }}" style="display: inline;">
                    <input type="hidden" name="filepath" value="{{ file.filepath }}">
                    <button type="submit" class="btn btn-success approve-btn">Approve</button>
                </form>
                <form method="POST" action="{{ url_for('reject_file') }}" style="display: inline;">
                    <input type="hidden" name="filepath" value="{{ file.filepath }}">
                    <button type="submit" class="btn btn-danger reject-btn">Reject</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="empty-state">
    <p>No files are currently pending approval.</p>
</div>
{% endif %}

{% endblock %}